# üöÄ GymMindAI Bot - Setup Instructions

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js**: –≤–µ—Ä—Å–∏—è 18+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 22.14.0)
- **npm**: –≤–µ—Ä—Å–∏—è 9+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 10.9.2)
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: Windows, macOS, Linux
- **–ü–∞–º—è—Ç—å**: –º–∏–Ω–∏–º—É–º 512 MB RAM
- **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ**: 200 MB

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/Dmitry140340/GymMindAI.git
cd GymMindAI
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª, –∑–∞–ø–æ–ª–Ω–∏–≤ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_BOT_USERNAME=your_bot_username

# Coze API
COZE_API_KEY=your_coze_api_key
COZE_BOT_ID=your_coze_bot_id

# YooKassa (Production)
PAYMENT_MODE=production
YOOKASSA_PROD_SHOP_ID=your_shop_id
YOOKASSA_PROD_SECRET_KEY=your_secret_key

# Admin
ADMIN_IDS=your_telegram_id
```

### 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm start
```

## üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram Bot Token
1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ username –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Coze API
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [coze.com](https://coze.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –∏ Bot ID
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ workflow –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooKassa
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ [yookassa.ru](https://yookassa.ru)
2. –ü–æ–ª—É—á–∏—Ç–µ Shop ID –∏ Secret Key
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL: `https://your-domain.com/webhook/payment`

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `./data/subscriptions.db`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üöÄ –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### –° PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
npm install -g pm2
pm2 start ecosystem.config.json
pm2 save
pm2 startup
```

### –° Docker
```bash
docker build -t gymmind-bot .
docker run -d --name gymmind-bot -p 3004:3004 gymmind-bot
```

### –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
chmod +x deploy.sh
./deploy.sh
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:
```bash
# –¢–µ—Å—Ç Coze API
node test_coze.js

# –¢–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
node test_database.js

# –¢–µ—Å—Ç –ø–æ–¥–ø–∏—Å–æ–∫
node test_subscriptions.js

# –¢–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–µ–π
node test_payment.js
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
```bash
# PM2 –ª–æ–≥–∏
pm2 logs

# –û–±—ã—á–Ω—ã–µ –ª–æ–≥–∏
tail -f bot.log
```

### –°—Ç–∞—Ç—É—Å
```bash
# PM2 —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep node
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env —Ñ–∞–π–ª**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è webhook**
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏ webhook –æ—Ç YooKassa**

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ YooKassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ webhook URL
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (test/production)

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ò–ò
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Coze API –∫–ª—é—á
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ Bot ID
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues**: [—Å–æ–∑–¥–∞—Ç—å issue](https://github.com/Dmitry140340/GymMindAI/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [README.md](./README.md)
- **–¢–µ—Å—Ç—ã**: [TEST_RESULTS.md](./TEST_RESULTS.md)
