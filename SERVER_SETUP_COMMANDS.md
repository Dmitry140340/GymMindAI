# üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ TimeWeb

## üîê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: SSH —Å –ø–∞—Ä–æ–ª–µ–º
```bash
ssh root@85.198.80.51
# –ü–∞—Ä–æ–ª—å: boNe?7vBEtkL-_
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: PowerShell (Windows)
```powershell
ssh root@85.198.80.51
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: boNe?7vBEtkL-_
```

## ‚úÖ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã:"
whoami
pwd
lsb_release -a

# 2. –ü—Ä–æ–≤–µ—Ä–∏–º cloud-init –ª–æ–≥
echo -e "\n=== Cloud-init –ª–æ–≥ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å—Ç—Ä–æ–∫) ==="
tail -n 20 /var/log/cloud-init-output.log

# 3. –ü—Ä–æ–≤–µ—Ä–∏–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ ==="
node --version 2>/dev/null && echo "‚úÖ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" || echo "‚ùå Node.js –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
npm --version 2>/dev/null && echo "‚úÖ npm —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" || echo "‚ùå npm –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
pm2 --version 2>/dev/null && echo "‚úÖ PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" || echo "‚ùå PM2 –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
git --version 2>/dev/null && echo "‚úÖ Git —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" || echo "‚ùå Git –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
nginx -v 2>/dev/null && echo "‚úÖ Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω" || echo "‚ùå Nginx –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

# 4. –ü—Ä–æ–≤–µ—Ä–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è botuser
echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è botuser ==="
id botuser 2>/dev/null && echo "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å botuser —Å–æ–∑–¥–∞–Ω" || echo "‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å botuser –ù–ï —Å–æ–∑–¥–∞–Ω"

# 5. –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è ==="
if [ -d "/home/botuser/GymMindAI" ]; then
    echo "‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω"
    ls -la /home/botuser/GymMindAI/ | head -10
else
    echo "‚ùå –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ù–ï –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω"
fi
```

## üîß –ï—Å–ª–∏ cloud-init –ù–ï –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é

### –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js LTS
curl -fsSL https://deb.nodesource.com/setup_lts.x | bash -
apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
apt install -y git nginx npm

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ
npm install -g pm2

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è botuser (–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω)
useradd -m -s /bin/bash botuser
usermod -aG sudo botuser

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–µ—Å–ª–∏ –Ω–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω)
cd /home/botuser
sudo -u botuser git clone https://github.com/Dmitry140340/GymMindAI.git
chown -R botuser:botuser /home/botuser/GymMindAI

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd /home/botuser/GymMindAI
sudo -u botuser npm install
```

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é botuser
su - botuser
cd GymMindAI

# –ö–æ–ø–∏—Ä—É–µ–º —à–∞–±–ª–æ–Ω .env
cp .env.template .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env —Ñ–∞–π–ª
nano .env
```

### 2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤ .env —Ñ–∞–π–ª–µ:
```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
COZE_API_KEY=–≤–∞—à_api_–∫–ª—é—á_coze
COZE_BOT_ID=–≤–∞—à_bot_id
YOOKASSA_PROD_SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
WEBHOOK_URL=http://85.198.80.51/webhook
ADMIN_IDS=–≤–∞—à_telegram_id
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:
```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
./deploy-production.sh

# –ò–õ–ò –∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é:
pm2 start ecosystem.production.config.js
pm2 save
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
```bash
# –°—Ç–∞—Ç—É—Å PM2
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs fitnessbotai

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
./monitor.sh
```

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook:

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ webhook URL:
```bash
curl -X POST "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/setWebhook" \
     -H "Content-Type: application/json" \
     -d '{"url":"http://85.198.80.51/webhook"}'
```

## üîç –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tuln | grep -E ':80|:3004'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep node

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–∏—Å—Ç–µ–º—ã
journalctl -u nginx -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
free -h

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª—É–∂–±
systemctl restart nginx
pm2 restart fitnessbotai
```
