// –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫
import dotenv from 'dotenv';

dotenv.config();

console.log('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫...');

// –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫
const buttonHandlers = {
  // –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
  '–ò–ò-—Ç—Ä–µ–Ω–µ—Ä': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ò–ò-—Ç—Ä–µ–Ω–µ—Ä–∞'),
  '–ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤'),
  '–ü–æ–¥–ø–∏—Å–∫–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥–ø–∏—Å–∫–∏'),
  '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ—Ñ–∏–ª—è'),
  '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏'),
  '–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö'),
  '–ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–æ–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞'),
  '–ü–æ–º–æ—â—å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–º–æ—â–∏'),
  
  // –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫
  '–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω - 150‚ÇΩ': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–∞–∑–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞'),
  '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–ª–∞–Ω - 300‚ÇΩ': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞'),
  '–ü—Ä–µ–º–∏—É–º –ø–ª–∞–Ω - 450‚ÇΩ': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ–º–∏—É–º –ø–ª–∞–Ω–∞'),
  
  // –ü–ª–∞—Ç–µ–∂–∏
  '–û–ø–ª–∞—Ç–∏—Ç—å —Å–µ–π—á–∞—Å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–ø–ª–∞—Ç—ã'),
  '–ù–∞–∑–∞–¥ –∫ –ø–ª–∞–Ω–∞–º': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –ø–ª–∞–Ω–∞–º'),
  '–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é'),
  
  // –ò–ò –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
  '/training_program': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫'),
  '/nutrition_plan': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è'),
  '/deepresearch': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è'),
  '/composition_analysis': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ—Å—Ç–∞–≤–∞'),
  
  // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  '–ó–∞–ø–∏—Å–∞—Ç—å –≤–µ—Å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–ø–∏—Å–∏ –≤–µ—Å–∞'),
  '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–ª–∏'),
  '–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏'),
  '–ú–æ–∏ –∑–∞–ø–∏—Å–∏': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø–∏—Å–µ–π'),
  
  // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
  '–ì—Ä–∞—Ñ–∏–∫ –≤–µ—Å–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥—Ä–∞—Ñ–∏–∫–∞ –≤–µ—Å–∞'),
  '–ì—Ä–∞—Ñ–∏–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥—Ä–∞—Ñ–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫'),
  '–û–±—â–∏–π –æ—Ç—á–µ—Ç': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—â–µ–≥–æ –æ—Ç—á–µ—Ç–∞'),
  '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π'),
  
  // –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  '–°–∏–ª–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–ª–æ–≤–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏'),
  '–ö–∞—Ä–¥–∏–æ': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–∞—Ä–¥–∏–æ'),
  '–ô–æ–≥–∞/–†–∞—Å—Ç—è–∂–∫–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –π–æ–≥–∏'),
  '–ï–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –µ–¥–∏–Ω–æ–±–æ—Ä—Å—Ç–≤'),
  
  // –¶–µ–ª–∏
  '–ù–∞–±—Ä–∞—Ç—å –º—ã—à–µ—á–Ω—É—é –º–∞—Å—Å—É': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–µ–ª–∏ –Ω–∞–±–æ—Ä–∞ –º–∞—Å—Å—ã'),
  '–°–Ω–∏–∑–∏—Ç—å –≤–µ—Å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–µ–ª–∏ —Å–Ω–∏–∂–µ–Ω–∏—è –≤–µ—Å–∞'),
  '–£–≤–µ–ª–∏—á–∏—Ç—å —Å–∏–ª—É': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–µ–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∏–ª—ã'),
  '–£–ª—É—á—à–∏—Ç—å –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–µ–ª–∏ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏'),
  '–ü–æ–≤—ã—Å–∏—Ç—å –≥–∏–±–∫–æ—Å—Ç—å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ü–µ–ª–∏ –≥–∏–±–∫–æ—Å—Ç–∏'),
  '–û–±—â–∞—è —Ñ–∏–∑–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—â–µ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏'),
  
  // Callback –∫–Ω–æ–ø–∫–∏
  'accept_agreement': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏–Ω—è—Ç–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è'),
  'decline_agreement': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è'),
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  '–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫'),
  '–ò—Å—Ç–æ—Ä–∏—è –≤–µ—Å–∞': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å—Ç–æ—Ä–∏–∏ –≤–µ—Å–∞'),
  '–ü—Ä–æ–≥—Ä–µ—Å—Å': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞'),
  '–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏': () => console.log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π')
};

// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫...\n');

let handledCount = 0;
let totalButtons = Object.keys(buttonHandlers).length;

// –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
Object.keys(buttonHandlers).forEach((buttonText, index) => {
  try {
    const cleanText = buttonText.replace(/[ü§ñüß¨üíéüìäüìàüéØüîÑ‚ùì‚≠êüöÄ‚¨ÖÔ∏èüí≥üèãÔ∏è‚Äç‚ôÇÔ∏èü•óüî¨üß™üí™üèÉ‚Äç‚ôÇÔ∏èüßò‚Äç‚ôÄÔ∏èü•ä‚öñÔ∏èüìãüóëÔ∏èüèÜ‚ùå‚úÖüìÑ‚ùìüí¨‚ö°]/g, '').trim();
    
    console.log(`${index + 1}. –ö–Ω–æ–ø–∫–∞: "${buttonText}"`);
    buttonHandlers[buttonText]();
    handledCount++;
    
    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
    if (index > 0 && index % 10 === 0) {
      console.log('');
    }
  } catch (error) {
    console.log(`‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–∫–∏ "${buttonText}": ${error.message}`);
  }
});

console.log(`\nüìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í:`);
console.log(`‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ: ${handledCount}/${totalButtons}`);
console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${Math.round((handledCount / totalButtons) * 100)}%`);

if (handledCount === totalButtons) {
  console.log('\nüéâ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
} else {
  console.log('\n‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è.');
}

// –¢–µ—Å—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
console.log('\nüé≠ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è...');

const testScenarios = [
  {
    name: '–ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏',
    steps: ['–ü–æ–¥–ø–∏—Å–∫–∞', '–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω - 150‚ÇΩ', '–û–ø–ª–∞—Ç–∏—Ç—å —Å–µ–π—á–∞—Å']
  },
  {
    name: '–ó–∞–ø–∏—Å—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏',
    steps: ['–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ', '–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É', '–°–∏–ª–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞']
  },
  {
    name: '–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏',
    steps: ['–ê–Ω–∞–ª–∏—Ç–∏–∫–∞', '–ì—Ä–∞—Ñ–∏–∫ –≤–µ—Å–∞', '–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é']
  },
  {
    name: '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò',
    steps: ['–ò–ò-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã', '/training_program', '–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é']
  },
  {
    name: '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–∏',
    steps: ['–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ', '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å', '–°–Ω–∏–∑–∏—Ç—å –≤–µ—Å']
  }
];

testScenarios.forEach((scenario, index) => {
  console.log(`\n${index + 1}. –°—Ü–µ–Ω–∞—Ä–∏–π: ${scenario.name}`);
  scenario.steps.forEach((step, stepIndex) => {
    if (buttonHandlers[step]) {
      console.log(`   ${stepIndex + 1}. ${step} ‚úÖ`);
    } else {
      console.log(`   ${stepIndex + 1}. ${step} ‚ùå (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω)`);
    }
  });
});

console.log('\nüéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–Ω–æ–ø–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
