# üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π YooKassa

## üîß –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ—Å—Ç–æ–≤—ã–º –∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–∞–º–∏

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```bash
PAYMENT_MODE=test
```
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

### –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º (—Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏)
```bash
PAYMENT_MODE=production
```
- ‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –†–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏!
- üí∞ –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç —Å–ø–∏—Å—ã–≤–∞—Ç—å—Å—è —Å –∫–∞—Ä—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- üè™ –¢—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤—É—é—â–∏–π –º–∞–≥–∞–∑–∏–Ω YooKassa

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏
```bash
YOOKASSA_TEST_SHOP_ID=1139867
YOOKASSA_TEST_SECRET_KEY=test_hczBNmYmZ4vs8QaSMsyGHFdtU_3X039YoTcFS4L7DMo
```

### 2. –ü—Ä–æ–¥–∞–∫—à–Ω –∫–ª—é—á–∏  
```bash
YOOKASSA_PROD_SHOP_ID=1048732
YOOKASSA_PROD_SECRET_KEY=live_E2dE-ecYsexDzsBT-AzkDNeZ2HWPCBGQ52yPO6LdnIs
```

## üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–∏–π –º–∞–≥–∞–∑–∏–Ω –≤ YooKassa
2. –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–ª—é—á–∏ –æ—Ç YooKassa
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–ª–∞—Ç–µ–∂–∞—Ö

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º
PAYMENT_MODE=production

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω –∫–ª—é—á–∏
YOOKASSA_PROD_SHOP_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_shop_id
YOOKASSA_PROD_SECRET_KEY=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_secret_key
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
pm2 restart fitness-bot
# –∏–ª–∏
npm run start
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞: –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è "üí≥ –ü–ª–∞—Ç–µ–∂–∏: –ü–†–û–î–ê–ö–®–ù —Ä–µ–∂–∏–º"
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–æ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** –ø—Ä–æ–¥–∞–∫—à–Ω –∫–ª—é—á–∏ –≤ git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ .gitignore
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ test —Ä–µ–∂–∏–º–µ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω–æ–º
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–º–µ–Ω—É –∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–µ–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## üîÑ –û—Ç–∫–∞—Ç –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
```bash
PAYMENT_MODE=test
```
–ò –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –º–∞–≥–∞–∑–∏–Ω–∞ –≤ YooKassa
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ webhook
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É YooKassa
